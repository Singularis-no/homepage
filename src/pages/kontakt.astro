---
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/global.css";
import "../styles/kontakt.css";

const pageTitle = "Kontakt oss - Singularis";
const description =
  "Kontakt Singularis for skreddersydde nettsider og Shopify-løsninger. Vi hjelper deg med å realisere din digitale visjon.";

// Hent URL-parameter for pakke-type
const url = new URL(Astro.request.url);
const pakke = url.searchParams.get("pakke");
---

<BaseLayout pageTitle={pageTitle} description={description}>
  <section class="section">
    <div class="container">
      <div class="section-header">
        <span class="section-label">Kontakt</span>
        <h1 class="section-title">La oss skape noe fantastisk sammen</h1>
        <p class="section-subtitle">
          Fyll ut skjemaet under så tar vi kontakt med deg innen 24 timer. Vi
          ser frem til å høre om ditt prosjekt!
        </p>
      </div>

      <div class="contact-grid">
        <div class="contact-info">
          <h2>Kontaktinformasjon</h2>
          <div class="contact-details">
            <div class="contact-item">
              <h3>E-post</h3>
              <a href="mailto:kontakt@singularis.no">kontakt@singularis.no</a>
            </div>
            <div class="contact-item">
              <h3>Telefon</h3>
              <a href="tel:+4741106797">+47 41 10 67 97</a>
            </div>
          </div>
        </div>

        <div class="contact-form-container">
          <form
            name="kontakt"
            method="POST"
            data-netlify="true"
            action="/takk"
            class="contact-form"
          >
            <div class="form-group">
              <label for="navn" class="form-label">Navn *</label>
              <input
                type="text"
                id="navn"
                name="navn"
                required
                class="form-input"
                placeholder="Ditt fulle navn"
              />
            </div>

            <div class="form-group">
              <label for="epost" class="form-label">E-post *</label>
              <input
                type="email"
                id="epost"
                name="epost"
                required
                class="form-input"
                placeholder="din@epost.no"
              />
            </div>

            <div class="form-group">
              <label for="pakke" class="form-label">Interessert i</label>
              <select id="pakke" name="pakke" class="form-input">
                <option value="">Velg pakke</option>
                <option value="nettside">Nettside-pakken</option>
                <option value="shopify">Shopify-pakken</option>
                <option value="retainer">Retainer-pakker</option>
                <option value="enterprise">Enterprise</option>
                <option value="annet">Annet</option>
              </select>
            </div>

            <div class="form-group">
              <label for="nettside" class="form-label">Nettside</label>
              <input
                type="text"
                id="nettside"
                name="nettside"
                class="form-input"
                placeholder="www.din-nettside.no"
              />
            </div>

            <div class="form-group">
              <label for="melding" class="form-label">Melding *</label>
              <textarea
                id="melding"
                name="melding"
                required
                rows="6"
                class="form-textarea"
                placeholder="Fortell oss om ditt prosjekt, behov og ønsker..."
              ></textarea>
            </div>

            <button type="submit" class="button button-primary form-submit">
              Send melding
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Sikre at dropdown-en velger riktig pakke basert på URL-parameter
  const urlParams = new URLSearchParams(window.location.search);
  const pakke = urlParams.get("pakke");

  if (pakke) {
    const selectElement = document.getElementById("pakke") as HTMLSelectElement;
    if (selectElement) {
      selectElement.value = pakke;
    }
  }
</script>
